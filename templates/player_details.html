<!-- player_details.html -->
</style>
{% extends 'layout.html' %}

{% block content %}
    <div style="background-color: #2c3e50; padding: 10px; color: #ecf0f1;">
        <h1 style="margin: 0;">Player Details</h1>
    </div>

    <div>
        <h2>{{ player.PLAYER }}</h2>
        <p>Team: {{ player.TEAM }}</p>
        <!-- Scatter plot -->
        <div style="top:60px; left:10px; width:50%; height:50%;">
            <!--<h3>Shooting Performance</h3> -->
            <canvas id="shootingScatterPlot"></canvas>
        </div>
        <!-- Heatmap -->
        {% if heatmap_data %}
            <img src="data:image/png;base64,{{ heatmap_data }}" alt="{{ player.PLAYER }} Heatmap" style="width: 37%;">
        {% else %}
            <p>No heatmap available for this player.</p>
        {% endif %}        
        <!-- Radar chart 
        {% if player_chart %}
            {% set chart_url = url_for('static', filename=player_chart) %}
            <script>console.log("Chart URL:", {{ chart_url|tojson|safe }});</script>
            <img src="{{ chart_url }}" alt="{{ player.PLAYER }} Radar Chart" style="width: 25%;">
        {% else %}
            <p>No radar chart available for this player.</p>
        {% endif %}
    -->
    </div>

    <script>
document.addEventListener('DOMContentLoaded', (event) => {
    // Extracting data for the scatter plot
    var shootingData = {
        labels: ['FG%'],
        datasets: [
            {
                label: 'Field Goals Overall',
                backgroundColor: 'rgba(75, 192, 192, 0.5)',
                borderColor: 'rgba(75, 192, 192, 1)',
                data: [{x: {{ player.FG_PCT }}, y: {{ player.FGM }}}], // Adjust the data accordingly
            },
            {
                label: 'Three-Pointer Shooting',
                backgroundColor: 'rgba(255, 99, 132, 0.5)',
                borderColor: 'rgba(255, 99, 132, 1)',
                data: [{x: {{ player.FG3_PCT }}, y: {{ player.FG3M }}}], // Adjust the data accordingly
            },
            {
                label: 'Free Throw Shooting',
                backgroundColor: 'rgba(255, 205, 86, 0.5)',
                borderColor: 'rgba(255, 205, 86, 1)',
                data: [{x: {{ player.FT_PCT }}, y: {{ player.FTM }}}], // Adjust the data accordingly
            },
        ],
    };

    // Creating the scatter plot
    var ctx = document.getElementById('shootingScatterPlot').getContext('2d');
    var shootingScatterPlot = new Chart(ctx, {
        type: 'scatter',
        data: shootingData,
        options: {
            scales: {
                x: {
                    type: 'linear',
                    position: 'bottom',
                    title: {
                        display: true,
                        text: 'Shooting Percentage (%)',
                        color: 'rgba(255, 255, 255, 0.8)',
                    },
                },
                y: {
                    title: {
                        display: true,
                        type: 'linear',
                        text: 'Field Goals Made',
                        color: 'rgba(255, 255, 255, 0.8)',
                    },
                },
            },
        },
    });
});
</script>

{% endblock %}
